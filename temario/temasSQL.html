<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecciones: SQL | CodeCraft</title>

    <link rel="stylesheet" href="../css/estilos.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    <header class="main-header">
        <nav class="navbar container">
            <a href="../Index.html" class="logo">
                <span class="nombre">CodeCraft</span>
            </a>
            <div class="course-navigation">
                <a href="../cursos/SQL.html" class="btn btn-primary"
                    style="padding: 8px 20px; font-size: 0.9rem;">Volver al Curso</a>
            </div>
        </nav>
    </header>

    <main>
        <section class="container" style="margin-top: 2rem;">
            <div class="lesson-container">

                <div class="slider">
                    <!-- Slide 1 -->
                    <div class="slide active">
                        <h2 class="lesson-title">1. Datos: El Nuevo Petróleo</h2>
                        <p class="lesson-text">
                            Las apps efímeras guardan datos en memoria (RAM). Las apps serias guardan datos para siempre
                            (Persistencia).
                            <br><br>
                            Una <strong>Base de Datos Relacional (RDBMS)</strong> es como un Excel supervitaminado,
                            seguro y multiusuario.
                            <br>
                            Hablamos con ella usando <strong>SQL (Structured Query Language)</strong>. No importa si
                            usas PostgreSQL, MySQL o SQL Server, el idioma es el mismo al 90%.
                        </p>
                    </div>

                    <!-- Slide 2 -->
                    <div class="slide">
                        <h2 class="lesson-title">2. Tablas, Filas y Columnas</h2>
                        <p class="lesson-text">
                            La estructura es rígida (Schema).
                        <ul>
                            <li><strong>Tabla:</strong> La entidad (ej: `Usuarios`).</li>
                            <li><strong>Columna:</strong> El atributo (ej: `email`, `edad`). Tienen tipos fijos (INT,
                                VARCHAR).</li>
                            <li><strong>Fila:</strong> El registro individual (ej: `Juan, 25 años`).</li>
                        </ul>
                        No puedes meter texto en una columna numérica. Esta rigidez es lo que garantiza la integridad de
                        los datos financieros, bancarios, etc.
                        </p>
                    </div>

                    <!-- Slide 3: QUIZ 1 -->
                    <div class="slide">
                        <h2 class="lesson-title">Evaluación 1: Conceptos</h2>
                        <div class="quiz-container">
                            <p class="quiz-question">¿Qué es un 'Schema'?</p>
                            <div class="quiz-options">
                                <div class="option-btn" data-correct="false">Un diagrama bonito.</div>
                                <div class="option-btn" data-correct="true">El plano o estructura definida de la base de
                                    datos (tablas, campos, tipos).</div>
                                <div class="option-btn" data-correct="false">Un tipo de dato.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 4 -->
                    <div class="slide">
                        <h2 class="lesson-title">3. SELECT: Pidiendo datos</h2>
                        <p class="lesson-text">
                            Es el comando que más usarás.
                        <pre><code class="language-sql">-- SELECT [qué columnas] FROM [qué tabla];

SELECT nombre, email FROM usuarios;

-- El asterisco * es un comodín: "Dame TODAS las columnas"
SELECT * FROM usuarios;</code></pre>
                        <strong>Tip de Performance:</strong> Nunca uses `SELECT *` en producción si la tabla tiene 50
                        columnas. Pide solo lo que necesitas. Ahorra ancho de banda.
                        </p>
                    </div>

                    <!-- Slide 5 -->
                    <div class="slide">
                        <h2 class="lesson-title">4. WHERE: Filtrando</h2>
                        <p class="lesson-text">
                            Sin esto, traerías millones de filas.
                        <pre><code class="language-sql">SELECT * FROM productos
WHERE precio > 100 AND categoria = 'Electrónica';</code></pre>
                        Puedes usar operadores lógicos (`AND`, `OR`, `NOT`) y de comparación (`=`, `<>`, `>`, `<`). <br>
                                También `LIKE` para búsquedas parciales: `WHERE nombre LIKE 'A%'` (Empieza con A).
                                </p>
                    </div>

                    <!-- Slide 6 -->
                    <div class="slide">
                        <h2 class="lesson-title">5. INSERT, UPDATE, DELETE</h2>
                        <p class="lesson-text">
                            Manipulando datos (DML).
                        <pre><code class="language-sql">-- Crear
INSERT INTO usuarios (nombre, edad) VALUES ('Ana', 30);

-- Modificar (¡SIN WHERE MODIFICA TODOS!)
UPDATE usuarios SET edad = 31 WHERE nombre = 'Ana';

-- Borrar (¡PELIGRO!)
DELETE FROM usuarios WHERE id = 1;</code></pre>
                        </p>
                    </div>

                    <!-- Slide 7: QUIZ 2 -->
                    <div class="slide">
                        <h2 class="lesson-title">Evaluación 2: Seguridad</h2>
                        <div class="quiz-container">
                            <p class="quiz-question">¿Qué pasa si escribo `UPDATE usuarios SET activo = true;` y olvido
                                el WHERE?</p>
                            <div class="quiz-options">
                                <div class="option-btn" data-correct="true">Activas a TODOS los usuarios de la base de
                                    datos. Desastre potencial.</div>
                                <div class="option-btn" data-correct="false">SQL te pregunta "¿Estás seguro?".</div>
                                <div class="option-btn" data-correct="false">Solo actualiza el primer registro.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 8 -->
                    <div class="slide">
                        <h2 class="lesson-title">6. Primary Key (PK)</h2>
                        <p class="lesson-text">
                            Cada fila debe tener un identificador único, como el DNI o Cédula.
                            <br>
                            Usualmente es una columna `id` (Número entero autoincremental: 1, 2, 3...).
                            <br>
                            Garantiza que no haya dos 'Juan Pérez' que sean la misma persona.
                        </p>
                    </div>

                    <!-- Slide 9 -->
                    <div class="slide">
                        <h2 class="lesson-title">7. Relaciones y Foreign Keys (FK)</h2>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/9yeOJ0ZHU60" title="SQL Joins y Relaciones"
                                frameborder="0" allowfullscreen></iframe>
                        </div>
                        <p class="lesson-text">
                            La magia de lo "Relacional". Conectamos tablas.
                            <br><br>
                            Si un Usuario tiene muchos Pedidos:
                            <br>
                            Tabla `Pedidos` tiene una columna `usuario_id` (FK) que apunta al `id` (PK) de la tabla
                            `Usuarios`.
                            <br>
                            Así sabemos de quién es cada pedido sin repetir el nombre del usuario mil veces.
                        </p>
                    </div>

                    <!-- Slide 10 -->
                    <div class="slide">
                        <h2 class="lesson-title">8. JOIN: Cruzando tablas</h2>
                        <p class="lesson-text">
                            Para reconstruir la información separada.
                        <pre><code class="language-sql">SELECT usuarios.nombre, pedidos.monto
FROM usuarios
INNER JOIN pedidos ON usuarios.id = pedidos.usuario_id;</code></pre>
                        `INNER JOIN`: Trae datos solo si hay coincidencia en ambos lados (Usuarios CON pedidos).
                        <br>
                        `LEFT JOIN`: Trae todos los usuarios, tengan pedidos o no.
                        </p>
                    </div>

                    <!-- Slide 11: QUIZ 3 -->
                    <div class="slide">
                        <h2 class="lesson-title">Evaluación 3: Joins</h2>
                        <div class="quiz-container">
                            <p class="quiz-question">Quiero una lista de todos mis clientes, y si han comprado algo, que
                                salga. Si no han comprado, que salga igual. ¿Qué JOIN uso?</p>
                            <div class="quiz-options">
                                <div class="option-btn" data-correct="false">INNER JOIN</div>
                                <div class="option-btn" data-correct="true">LEFT JOIN (Dame todo lo de la
                                    izquierda/usuarios aunque no haya match a la derecha).</div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 12 -->
                    <div class="slide">
                        <h2 class="lesson-title">9. Funciones de Agregación</h2>
                        <p class="lesson-text">
                            Haciendo matemáticas con los datos.
                        <pre><code class="language-sql">-- ¿Cuántos usuarios hay?
SELECT COUNT(*) FROM usuarios;

-- ¿Cuál es el producto más caro?
SELECT MAX(precio) FROM productos;

-- Promedio de edad
SELECT AVG(edad) FROM usuarios;</code></pre>
                        Se combina comúnmente con `GROUP BY` para reportes ("Ventas por Mes").
                        </p>
                    </div>

                    <!-- Slide 13 -->
                    <div class="slide">
                        <h2 class="lesson-title">10. Normalización</h2>
                        <p class="lesson-text">
                            Es el arte de organizar datos para evitar redundancia.
                            <br>
                            <strong>Regla:</strong> No repitas datos. Si guardas la dirección del cliente en cada
                            pedido, y el cliente se muda, tienes que actualizar 100 pedidos.
                            <br>
                            Mejor guarda la dirección en la tabla Clientes y relaciónala.
                        </p>
                    </div>

                    <!-- Slide 14 -->
                    <div class="slide">
                        <h2 class="lesson-title">11. Índices (Indices)</h2>
                        <p class="lesson-text">
                            Imagina buscar en un libro sin índice: tienes que leer hoja por hoja (Full Table Scan).
                            Lento.
                            <br>
                            Un índice en la columna `email` crea una estructura de árbol interna que permite encontrar
                            "juan@gmail.com" en milisegundos, incluso entre millones de filas.
                            <br>
                            Pero cuidado: los índices ocupan espacio y hacen que escribir datos sea un poco más lento.
                        </p>
                    </div>

                    <!-- Slide 15: Final -->
                    <div class="slide">
                        <h2 class="lesson-title">Datos Dominados</h2>
                        <p class="lesson-text">
                            SQL es una habilidad eterna. Ha funcionado igual por 40 años y seguirá funcionando.
                            <br><br>
                            Ahora tienes el poder de persistir la información. Eres un arquitecto de datos.
                        </p>
                    </div>

                </div>

                <div class="slider-controls">
                    <button id="prevBtn" class="btn" style="background: #ccc; color: #333;">Lección Anterior</button>
                    <button id="nextBtn" class="btn btn-primary">Siguiente Lección</button>
                </div>
            </div>
        </section>
    </main>

    <script src="../Js/slider.js"></script>
    <script src="../Js/theme.js"></script>
</body>

</html>